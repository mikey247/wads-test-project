{% load wagtailimages_tags %}

<h3>{{ self.title }}</h3>
{% with prefix="carousel" id=self.title|slugify %}
  <div id="{{ prefix }}-{{ id }}"
       class="carousel {% if self.animate %}slide{% endif %}"
       data-ride="carousel"
       data-interval="{{ self.interval }}"
       {% if not self.pause %}data-pause="false"{% endif %}
       {% if not self.wrap %}data-wrap="false"{% endif %}>

    <ol class="carousel-indicators">
    {% for block in self.slides %}
      {% with block.value as slide %}
        <li data-target="#{{ prefix }}-{{ id }}" data-slide-to="{{ forloop.counter0 }}" class="{% if forloop.first %}active{% endif %}"></li>
      {% endwith %}
    {% endfor %}
    </ol>

    <div class="carousel-inner" role="listbox">
    {% for block in self.slides %}
      {% with block.value as slide %}
        <div class="item {% if forloop.first %}active{% endif %}">
          {% image slide.image width-1200 as photo %}
          <img src="{{ photo.url }}" alt="{{ slide.title }}">
          <div class="carousel-caption">{{ slide.text }}</div>
        </div>
      {% endwith %}
    {% endfor %}
    </div>

    <a class="left carousel-control" href="#{{ prefix }}-{{ id }}" role="button" data-slide="prev">
      <span class="fa fa-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#{{ prefix }}-{{ id }}" role="button" data-slide="next">
      <span class="fa fa-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
{% endwith %}
