{% load cache static wagtailsettings_tags sekizai_tags %}
{% get_settings %}

<!DOCTYPE html>
<html lang="{% if request.LANGUAGE_CODE %}{{ request.LANGUAGE_CODE }}{% else %}en{% endif %}">
  <head>
    {% block head-meta %}
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    {% endblock %}

    {% block head-analytics %}
      {% if settings.sitecore.SiteSettings.ga_tracking_id %}
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id={{ settings.sitecore.SiteSettings.ga_tracking_id }}"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  
	  gtag('config', '{{ settings.sitecore.SiteSettings.ga_tracking_id }}');
	</script>
      {% endif %}
    {% endblock %}

    {% block head-cookie-consent %}
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
    {% endblock %}
    
    {% block head-title %}
      <title>{{ request.site.name }}</title>
    {% endblock %}

    <link rel="shortcut icon" href="{%  static 'favicon.ico' %}">
    
    {% block head-css %}
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" type="text/css" href="{% static 'sitecore/bootstrap-4.3.1/css/bootstrap.min.css' %}">
      <!-- Bootswatch Theme CSS -->
      {% if settings.sitecore.SiteSettings.bootstrap_theme != 'default' %}
	<link rel="stylesheet" type="text/css"
	      href="{% static 'sitecore/bootswatch-4.3.1/'|add:settings.sitecore.SiteSettings.bootstrap_theme|add:'/bootstrap.min.css' %}">
      {% endif %}
      <!-- Font Awesome CSS -->
      <link rel="stylesheet" type="text/css" href="{% static 'sitecore/fontawesome-5.11.2/css/all.css' %}">

      <!-- Pygment Style CSS -->
      <link rel="stylesheet" type="text/css"
	    href="{% static 'sitecore/pygments/linenos.css' %}">
      <link rel="stylesheet" type="text/css"
	    href="{% static 'sitecore/pygments/'|add:settings.sitecore.SiteSettings.code_theme|add:'.css' %}">

      <!-- Sitecore CSS -->
      <link rel="stylesheet" type="text/css" href="{% static 'sitecore/css/sitecore.css' %}">
      <link rel="stylesheet" type="text/css" href="{% static 'sitecore/css/wagtail.css' %}">
    {% endblock %}

    {% block head-css-extension %}{% endblock %}
    {% block head-css-dynamic-block %}{% endblock %}
    {% render_block "head-css-dynamic" %}

    {% block head-js %}{% endblock %}
    {% block head-js-extension %}{% endblock %}
    {% block head-js-dynamic-block %}{% endblock %}
    {% render_block "head-js-dynamic" %}
    
    {% block head-extension %}{% endblock %}
  </head>
  
  <body class="{% block body-class %}{% endblock %}" style="min-height: 100vh; position: relative; margin: 0; padding-bottom: 0px; padding-top: 0px;">
    {% block body-content %}
      <h1>html5-bootstrap-skeleton.html / Wagtail block body-content default body text</h1>
    {% endblock %}
    
    {% block body-js %}
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>

      <script src="{% static 'sitecore/bootstrap-4.3.1/js/bootstrap.min.js' %}"></script>
    {% endblock %}

    {% block body-js-dynamic-block %}{% endblock %}
    {% render_block "body-js-dynamic" %}
    {% block body-js-extension %}{% endblock %}

    {% block body-cookie-consent %}
      <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
      <script>
	window.addEventListener("load", function(){
	    window.cookieconsent.initialise({
		"palette": {
		    "popup": {
			"background": "#393a3c",
			"text": "#ffffff"
		    },
		    "button": {
			"background": "#fc3",
			"text": "#000"
		    }
		},
		"theme": "classic",
		"position": "top-left",
		"content": {
		    "message": "<h3>Cookies</h3><p>This website uses cookies. By dismissing this message you are consenting to the use of cookies as detailed in our <a class='cc-link' href='https://www.manchester.ac.uk/discover/privacy-information/data-protection/website-privacy-notice/#cookies'>privacy notice.</a></p><p>You can clear and manage cookies through your <a class='cc-link' href='https://www.manchester.ac.uk/discover/privacy-information/data-protection/website-privacy-notice/#delete-manage-cookies'>browser settings.</a></p>",
		    "link": "",
		    "dismiss": "Dismiss"
		}
	    })});
      </script>
    {% endblock %}
    
  </body>
</html>
