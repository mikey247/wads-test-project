{% extends "sitecore/base_default.html" %}
{% load shortcodes article_tags site_tags static wagtailcore_tags wagtailimages_tags %}

{% block head-title %}
  <title>{{ self.title }}</title>
{% endblock %}

{% block body-class %}article-splash{% endblock %}

{% block navbar %}
  {% get_site_root as site_root %}
  {% top_menu parent=site_root transparent=False calling_page=self  %}
{% endblock %}

{% block page-head %}
  <div class="wrapper">
    {% if self.splash_image %}
      {% image self.splash_image fill-1600x600 as photo %}
      <div class="page-header parallax-window" data-parallax="scroll" data-image-src="{{ photo.url }}" style="background: transparent;">
	<div class="container">
	  <div class="row">
	    <div class="col-lg-8 p-0 ml-auto mr-auto">
	      <div
		  id="splash"
		  class="{{ self.splash_text_align }} {{ self.splash_text_colour }} {{ self.splash_bg_colour }} splash-shadow"
		  style="border-radius: {{ self.splash_border_radius }}px!important;">
		  {% for block in page.splash_content %}
		  {% if block.block_type == 'image' %}
		    {% image block.value width-1200 as photo %}
		    <figure class="figure">
		      <img src="{{ photo.url }}" class="figure-img img-fluid rounded" alt="{{ block.value.alt_text }}">
		      <b> <figcaption class="figure-caption">{{ block.value.title }}</figcaption> </b>
          <i> <figcaption class="figure-caption">{{ block.value.caption }}</figcaption> </i>
		    </figure>
		  {% else %}
		    {% include_block block %}
		  {% endif %}
		  {% endfor %}
	      </div>
	    </div>
	  </div>
	</div>
      </div>
    {% endif %}
  </div>
  <div class="main main-raised">
    <section>
      <div class="container">
	<div class="row">
	  <div class="col">
	    <header class="my-4">
	      <div id="intro" class="lead {{ self.intro_text_align }} {{ self.intro_text_colour }}">
		{% for block in page.intro %}
		  {% if block.block_type == 'image' %}
		    {% image block.value width-1200 as photo %}
		    <figure class="figure">
		      <img src="{{ photo.url }}" class="figure-img img-fluid rounded" alt="{{ block.value.alt_text }}">
          <b> <figcaption class="figure-caption">{{ block.value.title }}</figcaption> </b>
          <i> <figcaption class="figure-caption">{{ block.value.caption }}</figcaption> </i>
		    </figure>
		  {% else %}
		    {% include_block block %}
		  {% endif %}
		{% endfor %}
	      </div>
	    </header>
	  </div>
	</div>
      </div>
    </section>
  </div>
{% endblock page-head %}

{% block page-content-main-header %}
  {% if self.display_title %}
    <h1>{{ self.title }}</h1>
  {% endif %}
{% endblock %}

{% block page-content-main-article %}
  <article>
    <section class="my-4">
      {% for block in page.body %}
	{% if block.block_type == 'image' %}
	  {% image block.value width-1200 as photo %}
	  <figure class="figure">
	    <img src="{{ photo.url }}" class="figure-img img-fluid rounded" alt="{{ block.value.alt_text }}">
      <b> <figcaption class="figure-caption">{{ block.value.title }}</figcaption> </b>
      <i> <figcaption class="figure-caption">{{ block.value.caption }}</figcaption> </i>
	  </figure>
	{% else %}
	  {% include_block block %}
	{% endif %}
      {% endfor %}
    </section>
  </article>
{% endblock %}

{% block page-content-main-col-size %}col-lg-8{% endblock %}
{% block page-content-aside-col-size %}col-lg-4{% endblock %}
{% block page-content-main-col-order %}order-1 order-lg-1{% endblock %}
{% block page-content-aside-col-order %}order-2 order-lg-2{% endblock %}

{% block page-content-aside-slot-1 %}
<a class="twitter-timeline" data-lang="en" data-height="1000" href="https://twitter.com/UoM_eResearch?ref_src=twsrc%5Etfw">Tweets by UoM_eResearch</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
{% endblock %}

{% block head-css-extension %}
  <style>
    body {
      padding-top: 0!important;
    }
    
    .page-header {
      height: 75vh;
      margin: 0;
      padding: 0;
      border: 0;
      display: flex;
      align-items: center;
      overflow: hidden;
      background-position: 50%;
      background-size: cover;
    }
    
    nav.navbar-transparent {
      transition: 1000ms ease;
      background-color: transparent!important;
    }

    nav.navbar-opaque {
      transition: 1000ms ease;
    }

    .main {
      background: #fff;
      position: relative;
      z-index: 3;
    }

    .main-raised {
      margin: -60px 30px 0;
      border-radius: 6px;
      box-shadow: 0 16px 24px 2px rgba(0,0,0,.14), 0 6px 30px 5px rgba(0,0,0,.12), 0 8px 10px -5px rgba(0,0,0,.2);
    }

    div.splash-shadow h1 {
      text-shadow: 2px 2px #1c3577b8;
    }
    div.splash-shadow h2 {
      text-shadow: 2px 2px #1c3577b8;
    }
    div.splash-shadow h3 {
      text-shadow: 2px 2px #1c3577b8;
    }
    div.splash-shadow h4 {
      text-shadow: 2px 2px #1c3577b8;
    }
    div.splash-shadow h5 {
      text-shadow: 2px 2px #1c3577b8;
    }
    div.splash-shadow h6 {
      text-shadow: 2px 2px #1c3577b8;
    }
  </style>
{% endblock %}

{% block body-js-extension %}
  <script src="{% static 'sitecore/parallax.js-1.5.0/parallax.min.js' %}"></script>
  <script>
    //document.getElementById("splash").querySelectorAll("h1,h2,h3,h4,h5,h6").forEach(H => H.setAttribute("class", "text-white"));
  </script>
{% endblock %}
